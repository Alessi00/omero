<template>
    <require from="./regions-list"></require>
    <require from="./regions-drawing"></require>
    <require from="./regions-edit"></require>

    <div class="regions-container"
         show.bind="
            image_info.projection !== 'split' && regions_info.data !== null">

        <div class="regions-tools">
            <div class="row shapes-persistence" style="padding-top: 2px">
                <div class="btn-group" style="margin: 5px;">
                    <button type="button" class="btn btn-default btn-xs"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer >= 0) ||
                            !regions_info.image_info.can_annotate"
                        click.delegate="saveShapes()"
                        title="${!regions_info.image_info.can_annotate ?
                                    'No permission to save' : ''}">Save
                    </button>
                    <button type="button"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer >= 0)"
                        class="btn btn-default btn-xs"
                        click.delegate="undoHistory()">Undo
                    </button>
                    <button type="button"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer <
                            regions_info.history.history.length-1)"
                        class="btn btn-default btn-xs"
                        click.delegate="redoHistory()">Redo
                    </button>
                </div>

                <div class="checkbox checkbox-settings" style="line-height: 20px;">
                    <label>
                        <input style="line-height: 20px;" type="checkbox"
                        change.delegate="showComments($event.target.checked)">
                        Show Comments
                    </label>
                </div>

            </div>

            <hr/>
            <regions-edit regions_info.bind="regions_info"></regions-edit>

            <hr show.bind="regions_info !== null &&
                           regions_info.image_info.can_annotate"
                regions_info.bind="regions_info" />
            <regions-drawing show.bind="regions_info !== null &&
                                        regions_info.image_info.can_annotate"
                             regions_info.bind="regions_info">
            </regions-drawing>
            <hr />
        </div>
        <regions-list regions_info.bind="regions_info"></regions-list>

    </div>
</template>
